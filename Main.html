<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Materials Map</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.js"></script>


<script src="node_modules/leaflet-polylinedecorator/dist/leaflet.polylineDecorator.js"></script>

<!-- Style to make the map full screen -->
<style>
    html, body, #map { height: 100vh; margin: 0; padding: 0; }
</style>

<div id="map" style="width: 100%; height: 100vh;">
    <script>

        // Layer groups for all the different components
        const divertor = L.layerGroup();

        // Coordinates of Eindhoven
        var eindhoven = [51.449215, 5.487561];

        // --- Simple arrow ---
        var tungstenArrow = L.polyline([[30, 110], eindhoven], {}).bindPopup('Wow thats a lot of tungsten!').addTo(divertor);
        var arrowHead = L.polylineDecorator(tungstenArrow, {
            patterns: [
                {offset: '100%', repeat: 0, symbol: L.Symbol.arrowHead({pixelSize: 15, polygon: false, pathOptions: {stroke: true}})}
            ]
        }).addTo(divertor);

        const breedingBlanket = L.layerGroup();

        var lithiumArrow = L.polyline([[-25, 140], eindhoven], {}).bindPopup('Lithium here!').addTo(breedingBlanket);
        var arrowHead2 = L.polylineDecorator(lithiumArrow, {
            patterns: [
                {offset: '100%', repeat: 0, symbol: L.Symbol.arrowHead({pixelSize: 15, polygon: false, pathOptions: {stroke: true}})}
            ]
        }).addTo(breedingBlanket);

        const firstWall = L.layerGroup();

        const heating = L.layerGroup();

        const magnets = L.layerGroup();


        // Main map component
        var map = L.map('map', {
	        center: [50, 15],
	        zoom: 4,
	        layers: [L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
	        maxZoom: 19,
            minZoom: 2,
        	attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        })]
        });


        // Set of all overlays/components
        const overlays = {
	        'Divertor': divertor,
            'Breeding blanket': breedingBlanket,
            'First wall': firstWall,
            'Heating': heating,
            'Superconducting magnets': magnets
        };
        divertor.addTo(map);


        // Layer control to allow switching between layers
        const layerControl = L.control.layers(null, overlays).addTo(map);


        // In order to figure out where stuff is
        var popup = L.popup();
        function onMapClick(e) {
            popup
                .setLatLng(e.latlng)
                .setContent("You clicked the map at " + e.latlng.toString())
                .openOn(map);
        }
        map.on('click', onMapClick);
        
        
        

    </script>
</div>
